<div class="admin-status-container">
  <div class="header">
    <h2>Status da Inscrição</h2>
    <button class="btn-voltar" (click)="voltar()">← Voltar</button>
  </div>

  <div *ngIf="loading" class="loading">
    Carregando dados da inscrição...
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error && inscricao" class="inscricao-details">
    <div class="section">
      <h3>Controle</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Status:</span>
          <select [(ngModel)]="statusControle.status" class="form-control">
            <option value="">Selecione um status...</option>
            <option value="Em Andamento">Em Andamento</option>
            <option value="Desistência">Desistência</option>
            <option value="Concluído">Concluído</option>
          </select>
        </div>
        <div class="info-item full-width">
          <span class="label">Observação:</span>
          <textarea [(ngModel)]="statusControle.observacao" class="form-control" rows="3"></textarea>
        </div>
        <div class="info-item">
          <span class="label">Data Atualização:</span>
          <span class="value">{{ formatarData(statusControle.dataAtualizacao) }}</span>
        </div>
        <div class="info-item action-buttons">
          <button class="btn-salvar" (click)="salvarStatus()" [disabled]="loading">
            {{ loading ? 'Salvando...' : 'Salvar Alterações' }}
          </button>
        </div>
      </div>

      <!-- Histórico de Status -->
      <div class="history-section">
        <h4>Histórico de Status</h4>
        <div class="table-responsive" *ngIf="statusHistorico.length > 0">
          <table class="history-table">
            <thead>
              <tr>
                <th>Data</th>
                <th>Status</th>
                <th>Observação</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of statusHistorico">
                <td class="date-cell">{{ formatarData(item.dataAtualizacao) }}</td>
                <td class="status-cell">
                  <span class="status-badge" [ngClass]="{'Em-Andamento': item.status === 'Em Andamento', 'Desistência': item.status === 'Desistência', 'Concluído': item.status === 'Concluído'}">
                    {{ item.status || 'Não definido' }}
                  </span>
                </td>
                <td class="obs-cell">{{ item.observacao || '-' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="no-history" *ngIf="statusHistorico.length === 0">
          Nenhuma alteração de status registrada.
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Dados Pessoais</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Nome:</span>
          <span class="value">{{ inscricao.nomeCompleto }}</span>
        </div>
        <div class="info-item">
          <span class="label">Data de Nascimento:</span>
          <span class="value">{{ formatarData(inscricao.dataNascimento) }}</span>
        </div>
        <div class="info-item">
          <span class="label">Naturalidade:</span>
          <span class="value">{{ inscricao.naturalidade }}</span>
        </div>
        <div class="info-item">
          <span class="label">Sexo:</span>
          <span class="value">{{ inscricao.sexo }}</span>
        </div>
        <div class="info-item">
          <span class="label">Telefone/WhatsApp:</span>
          <span class="value">{{ inscricao.telefoneWhatsApp }}</span>
        </div>
        <div class="info-item">
          <span class="label">E-mail:</span>
          <span class="value">{{ inscricao.emailContato }}</span>
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Informações Sacramentais</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Batizado:</span>
          <span class="value">{{ inscricao.batizado ? 'Sim' : 'Não' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Paróquia do Batismo:</span>
          <span class="value">{{ inscricao.paroquiaBatismo || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Diocese do Batismo:</span>
          <span class="value">{{ inscricao.dioceseBatismo || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Primeira Comunhão:</span>
          <span class="value">{{ inscricao.comunhao ? 'Sim' : 'Não' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Paróquia da Comunhão:</span>
          <span class="value">{{ inscricao.paroquiaComunhao || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Diocese da Comunhão:</span>
          <span class="value">{{ inscricao.dioceseComunhao || 'N/A' }}</span>
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Documentação</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Documento de Identidade:</span>
          <span class="value">{{ inscricao.documentoIdentidadeNome || 'Não enviado' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Certidão de Batismo:</span>
          <span class="value">{{ inscricao.certidaoBatismoNome || 'Não enviado' }}</span>
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Endereço</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Endereço Completo:</span>
          <span class="value">{{ inscricao.endereco }}</span>
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Informações dos Pais</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Nome do Pai:</span>
          <span class="value">{{ inscricao.nomePai || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Estado Civil do Pai:</span>
          <span class="value">{{ inscricao.estadoCivilPai || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Naturalidade do Pai:</span>
          <span class="value">{{ inscricao.naturalidadePai || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Nome da Mãe:</span>
          <span class="value">{{ inscricao.nomeMae || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Estado Civil da Mãe:</span>
          <span class="value">{{ inscricao.estadoCivilMae || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Naturalidade da Mãe:</span>
          <span class="value">{{ inscricao.naturalidadeMae || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Casados na Igreja:</span>
          <span class="value">{{ inscricao.paisCasadosIgreja ? 'Sim' : 'Não' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Paróquia do Casamento:</span>
          <span class="value">{{ inscricao.paroquiaCasamentoPais || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Diocese do Casamento:</span>
          <span class="value">{{ inscricao.dioceseCasamentoPais || 'N/A' }}</span>
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Informações do Padrinho/Madrinha</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Nome:</span>
          <span class="value">{{ inscricao.nomePadrinhoMadrinha || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Já Crismado:</span>
          <span class="value">{{ inscricao.padrinhoCrismado ? 'Sim' : 'Não' }}</span>
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Informações do Curso</h3>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Tipo de Inscrição:</span>
          <span class="value">{{ inscricao.tipoInscricao }}</span>
        </div>
        <div class="info-item">
          <span class="label">Data de Início:</span>
          <span class="value">{{ formatarData(inscricao.dataInicioCurso) }}</span>
        </div>
        <div class="info-item">
          <span class="label">Comunidade:</span>
          <span class="value">{{ inscricao.comunidadeCurso }}</span>
        </div>
        <div class="info-item">
          <span class="label">Catequista:</span>
          <span class="value">{{ inscricao.nomeCatequista }}</span>
        </div>
        <div class="info-item">
          <span class="label">Horário:</span>
          <span class="value">{{ inscricao.horarioCurso }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
