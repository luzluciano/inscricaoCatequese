
<!-- CONTAINER PRINCIPAL -->
<div class="admin-spots-container">
  <!-- T√çTULO DA P√ÅGINA -->
  <div class="page-header">
    <div class="container">
      <!-- Breadcrumb -->
      <nav class="breadcrumb">
        <a routerLink="/home">üè† In√≠cio</a>
        <span class="separator">‚Ä∫</span>
        <a routerLink="/admin">‚öôÔ∏è Administra√ß√£o</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">üéØ Gerenciar Spots</span>
      </nav>
      
      <h1>üéØ Gerenciar Spots da Home</h1>
      <p>Gerencie o conte√∫do das √°reas de destaque da p√°gina inicial</p>
      
      <!-- Links de navega√ß√£o r√°pida -->
      <div class="quick-nav">
        <a routerLink="/admin" class="quick-link">‚Üê Voltar ao Painel</a>
        <a routerLink="/home" class="quick-link" target="_blank">üëÅÔ∏è Ver Home</a>
      </div>
    </div>
  </div>

  <!-- CONTE√öDO PRINCIPAL -->
  <div class="main-content">
    <div class="container">
      <!-- A√á√ïES PRINCIPAIS -->
      <div class="actions-bar">
        <button 
          class="btn-primary" 
          (click)="mostrarFormularioAdicionar()"
          *ngIf="!showAddForm && !editingSpot"
        >
          ‚ûï Novo Spot
        </button>
        
        <button 
          class="btn-secondary" 
          (click)="carregarSpots()"
        >
          üîÑ Atualizar
        </button>
      </div>

      <!-- LOADING STATE -->
      <div *ngIf="loading" class="loading-container">
        <div class="loading-spinner"></div>
        <p>Carregando spots...</p>
      </div>

      <!-- ERROR STATE -->
      <div *ngIf="error" class="error-container">
        <div class="error-icon">‚ö†Ô∏è</div>
        <p>{{ error }}</p>
        <button class="btn-secondary" (click)="carregarSpots()">Tentar Novamente</button>
      </div>

      <!-- FORMUL√ÅRIO DE ADICIONAR/EDITAR -->
      <div *ngIf="showAddForm || editingSpot" class="spot-form-container">
        <div class="form-header">
          <h2>{{ editingSpot ? 'Editar Spot' : 'Novo Spot' }}</h2>
          <button 
            class="btn-close" 
            type="button"
            (click)="editingSpot ? cancelarEdicao() : cancelarAdicao()"
          >
            ‚úñÔ∏è
          </button>
        </div>

        <form class="spot-form" (ngSubmit)="editingSpot ? salvarEdicao() : criarSpot()">
          <div class="form-grid">
            <!-- T√çTULO -->
            <div class="form-group">
              <label for="titulo">T√≠tulo *</label>
              <input
                type="text"
                id="titulo"
                [(ngModel)]="formTitulo"
                name="titulo"
                required
                maxlength="255"
                placeholder="Ex: Nova Inscri√ß√£o"
              />
            </div>

            <!-- SUBT√çTULO -->
            <div class="form-group">
              <label for="subtitulo">Subt√≠tulo</label>
              <input
                type="text"
                id="subtitulo"
                [(ngModel)]="formSubtitulo"
                name="subtitulo"
                maxlength="255"
                placeholder="Ex: Crisma 2024"
              />
            </div>

            <!-- DESCRI√á√ÉO -->
            <div class="form-group full-width">
              <label for="descricao">Descri√ß√£o *</label>
              <textarea
                id="descricao"
                [(ngModel)]="formDescricao"
                name="descricao"
                required
                rows="3"
                placeholder="Descreva o conte√∫do do spot..."
              ></textarea>
            </div>

            <!-- √çCONE -->
            <div class="form-group">
              <label for="icone">√çcone (Emoji)</label>
              <input
                type="text"
                id="icone"
                [(ngModel)]="formIcone"
                name="icone"
                maxlength="10"
                placeholder="üìù"
              />
            </div>

            <!-- TIPO -->
            <div class="form-group">
              <label for="tipoSpot">Tipo *</label>
              <select
                id="tipoSpot"
                [(ngModel)]="formTipoSpot"
                name="tipoSpot"
                required
                (change)="onTipoChange(formTipoSpot, !editingSpot)"
              >
                <option *ngFor="let tipo of tiposSpot" [value]="tipo.value">
                  {{ tipo.label }}
                </option>
              </select>
            </div>

            <!-- LINK TEXTO -->
            <div class="form-group">
              <label for="linkTexto">Texto do Link</label>
              <input
                type="text"
                id="linkTexto"
                [(ngModel)]="formLinkTexto"
                name="linkTexto"
                maxlength="100"
                placeholder="Ex: Inscrever-se"
              />
            </div>

            <!-- LINK URL -->
            <div class="form-group">
              <label for="linkUrl">URL do Link</label>
              <input
                type="text"
                id="linkUrl"
                [(ngModel)]="formLinkUrl"
                name="linkUrl"
                maxlength="500"
                placeholder="Ex: /inscricao"
              />
            </div>

            <!-- ORDEM -->
            <div class="form-group">
              <label for="ordem">Ordem</label>
              <input
                type="number"
                id="ordem"
                [(ngModel)]="formOrdem"
                name="ordem"
                min="1"
                max="99"
              />
            </div>

            <!-- ATIVO -->
            <div class="form-group checkbox-group">
              <label>
                <input
                  type="checkbox"
                  [(ngModel)]="formAtivo"
                  name="ativo"
                />
                Spot Ativo
              </label>
            </div>
          </div>

          <!-- CONFIGURA√á√ïES AVAN√áADAS -->
          <div class="advanced-settings">
            <h3>üé® Configura√ß√µes Visuais</h3>
            <div class="settings-grid">
              <div class="form-group">
                <label for="corFundo">Cor de Fundo</label>
                <input
                  type="color"
                  id="corFundo"
                  [(ngModel)]="formCorFundo"
                  name="corFundo"
                />
              </div>

              <div class="form-group">
                <label for="corTexto">Cor do Texto</label>
                <input
                  type="color"
                  id="corTexto"
                  [(ngModel)]="formCorTexto"
                  name="corTexto"
                />
              </div>

              <div class="form-group checkbox-group">
                <label>
                  <input
                    type="checkbox"
                    [(ngModel)]="formMostrarIcone"
                    name="mostrarIcone"
                  />
                  Mostrar √çcone
                </label>
              </div>

              <div class="form-group checkbox-group">
                <label>
                  <input
                    type="checkbox"
                    [(ngModel)]="formMostrarLink"
                    name="mostrarLink"
                  />
                  Mostrar Link
                </label>
              </div>
            </div>
          </div>

          <!-- BOT√ïES DO FORMUL√ÅRIO -->
          <div class="form-actions">
            <button type="submit" class="btn-primary">
              {{ editingSpot ? 'üíæ Salvar Altera√ß√µes' : '‚ûï Criar Spot' }}
            </button>
            <button 
              type="button" 
              class="btn-secondary"
              (click)="editingSpot ? cancelarEdicao() : cancelarAdicao()"
            >
              ‚ùå Cancelar
            </button>
          </div>
        </form>
      </div>

      <!-- LISTA DE SPOTS -->
      <div *ngIf="!loading && !error && spots.length > 0 && !showAddForm" class="spots-list">
        <div class="list-header">
          <h2>üìã Spots Cadastrados ({{ spots.length }})</h2>
        </div>

        <div class="spots-grid">
          <div 
            *ngFor="let spot of spots; trackBy: trackBySpotId"
            class="spot-item"
            [class.editing]="editingSpot?.id === spot.id"
          >
            <!-- CABE√áALHO DO SPOT -->
            <div class="spot-header">
              <div class="spot-info">
                <div class="spot-order">{{ spot.ordem }}</div>
                <div class="spot-icon" *ngIf="spot.icone">{{ spot.icone }}</div>
                <div class="spot-title-group">
                  <h3>{{ spot.titulo }}</h3>
                  <span class="spot-type">{{ getTipoLabel(spot.tipoSpot) }}</span>
                </div>
              </div>
              <div class="spot-status" [ngClass]="getStatusClass(spot.ativo)">
                {{ getStatusLabel(spot.ativo) }}
              </div>
            </div>

            <!-- CONTE√öDO DO SPOT -->
            <div class="spot-content">
              <p *ngIf="spot.subtitulo" class="spot-subtitle">{{ spot.subtitulo }}</p>
              <p class="spot-description">{{ spot.descricao }}</p>
              <div *ngIf="spot.linkUrl" class="spot-link">
                <span class="link-icon">üîó</span>
                <span>{{ spot.linkTexto || 'Link' }}: {{ spot.linkUrl }}</span>
              </div>
            </div>

            <!-- A√á√ïES DO SPOT -->
            <div class="spot-actions">
              <button 
                class="btn-icon btn-edit" 
                (click)="editarSpot(spot)"
                title="Editar"
              >
                ‚úèÔ∏è
              </button>
              
              <button 
                class="btn-icon btn-status" 
                (click)="toggleStatus(spot)"
                [title]="spot.ativo ? 'Desativar' : 'Ativar'"
              >
                {{ spot.ativo ? 'üî¥' : 'üü¢' }}
              </button>

              <button 
                class="btn-icon btn-move" 
                (click)="moverSpot(spot, 'up')"
                [disabled]="spot.ordem === 1"
                title="Mover para cima"
              >
                ‚¨ÜÔ∏è
              </button>

              <button 
                class="btn-icon btn-move" 
                (click)="moverSpot(spot, 'down')"
                [disabled]="spot.ordem === spots.length"
                title="Mover para baixo"
              >
                ‚¨áÔ∏è
              </button>

              <button 
                class="btn-icon btn-delete" 
                (click)="deletarSpot(spot)"
                title="Deletar"
              >
                üóëÔ∏è
              </button>
            </div>

            <!-- PREVIEW DAS CORES -->
            <div class="spot-preview" [style.background-color]="spot.configuracoes?.corFundo" [style.color]="spot.configuracoes?.corTexto">
              Preview das cores
            </div>
          </div>
        </div>
      </div>

      <!-- EMPTY STATE -->
      <div *ngIf="!loading && !error && spots.length === 0" class="empty-state">
        <div class="empty-icon">üì≠</div>
        <h3>Nenhum spot cadastrado</h3>
        <p>Comece criando o primeiro spot para a p√°gina inicial.</p>
        <button class="btn-primary" (click)="mostrarFormularioAdicionar()">
          ‚ûï Criar Primeiro Spot
        </button>
      </div>
    </div>
  </div>
</div>